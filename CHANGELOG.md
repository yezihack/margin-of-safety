# 更新日志

## [未发布] - 2026-02-05

### ✨ 新增功能

- 💰 **金额滑块输入**：添加 0-100,000 元的滑块控制，支持快速调整金额
- 🔢 **数字输入框**：恢复使用 el-input-number，支持精确输入和回车保存
- ⌨️ **回车键快速保存**：金额输入框支持回车键直接保存
- 📊 **实时金额显示**：输入框下方显示当前金额精确值
- 💾 **数据库备份功能**：支持将数据库备份到指定位置
- 🧭 **右侧导航栏**：设置页面添加快速导航功能
- 📜 **滚动提示**：设置页面内容过多时显示滚动提示
- ✏️ **编辑资产来源**：编辑资产时可以修改来源

### 🔧 优化改进

- ✨ **导航栏悬浮效果**：增强视觉反馈和交互体验
- 🔐 **登录流程**：修复需要输入两次密码的问题
- 📁 **数据库位置**：移至用户主目录 `~/.marginofsafety/`
- 🔑 **设置密码流程**：成功后跳转到登录页而非直接进入
- 📊 **指数显示**：在设置页面显示数据库和系统信息
- 💰 **金额验证**：不允许提交小于 0 的金额，最大限制 100,000 元
- ⌨️ **资产录入工作流**：保存后自动聚焦到基金代码输入框，保留来源值，查询后自动聚焦到金额并清空

### 🐛 修复问题

- 修复指数显示限制（最多3个）的状态更新问题
- 修复数据库路径跨平台兼容性问题
- 修复 runtime 包导入冲突问题
- **彻底修复登录需要输入两次密码的问题（使用后端状态管理）**
- 修复设置页面快速导航点击无法跳转的问题

---

## [1.0.0] - 2026-02-04

### ✨ 新功能

- 🔐 密码保护（首次设置 + 登录验证）
- 📊 资产管理（手动录入股票/债券）
- 📈 可视化分析（饼图展示配置比例）
- ⚖️ 再平衡建议（三种经典模型 + 自定义滑块）
- 📜 历史记录（折线图 + 快照保存）
- 🔒 数据加密（AES-256 保护金额）

### 🛠 技术栈

- **后端**：Go 1.24 + GORM + SQLite
- **前端**：Vue3 + Element Plus + ECharts
- **框架**：Wails v2
- **加密**：AES-256-GCM
- **数据库**：modernc.org/sqlite（纯 Go，无需 CGO）

### 🎯 经典比例模型

- 🛡 极度防御型（25/75）
- ⚖️ 平衡型（50/50）- 格雷厄姆推荐
- ⚔️ 进取型（70/30）

### 🔧 重要改进

- ✅ 使用 modernc.org/sqlite 替代 mattn/go-sqlite3
- ✅ 无需 CGO，无需安装 GCC/MinGW
- ✅ 跨平台编译更简单
- ✅ 构建速度更快

### 📚 文档

- README.md - 项目介绍
- START_HERE.md - 新手必读
- NO_CGO_SETUP.md - 无 CGO 编译指南
- QUICKSTART.md - 快速启动
- INSTALL.md - 安装指南
- USAGE.md - 使用指南
- PROJECT_STRUCTURE.md - 项目结构

### 🚀 启动脚本

- dev.bat - Windows 开发启动
- build.bat - Windows 构建
- start.bat - Windows 快速启动
- Makefile - Linux/Mac 支持

### 🔐 安全特性

- 密码 SHA-256 哈希存储
- 金额数据 AES-256-GCM 加密
- 完全离线存储
- 本地 SQLite 数据库

### 📝 已知问题

- 无

### 🎉 致谢

- 灵感来源：本杰明·格雷厄姆《聪明的投资者》
- UI 框架：Element Plus
- 图表库：Apache ECharts
- 跨平台框架：Wails
