# Margin - 安全边际投资组合管理工具

> Build portfolios that survive uncertainty

基于格雷厄姆"安全边际"理念的投资组合管理工具，帮助您构建能够抵御市场不确定性的资产配置。

## ✨ 核心功能

- 📊 **资产管理** - 自动识别基金类型，支持多来源管理
- ⚖️ **再平衡建议** - 智能计算资产配置偏差，提供调整方案
- 📈 **历史追踪** - 记录每次再平衡操作，可视化趋势分析
- 🔒 **数据加密** - AES-256 加密保护资产金额
- 🔐 **自动锁屏** - 可配置超时自动锁定，保护隐私

## 🚀 快速开始

### 安装依赖

```bash
# 安装 Go 依赖
go mod download

# 安装前端依赖
cd frontend
npm install
cd ..
```

### 开发模式

```bash
wails dev
```

### 构建应用

```bash
# Windows
wails build

# 跨平台构建
wails build -platform windows/amd64
wails build -platform darwin/amd64
wails build -platform linux/amd64
```

## 📖 使用指南

### 首次使用

1. **设置密码** - 首次启动时设置主密码（用于数据加密）
2. **添加资产** - 输入基金代码，系统自动识别类型
3. **选择策略** - 选择防御型(25%)、平衡型(50%)或进取型(70%)
4. **查看建议** - 系统计算并显示再平衡建议

### 三种投资策略

| 策略 | 股票比例 | 债券比例 | 适合人群 |
|------|---------|---------|---------|
| 🛡 极度防御型 | 25% | 75% | 新手、心理敏感型 |
| ⚖️ 平衡型 | 50% | 50% | 格雷厄姆推荐 |
| ⚔️ 进取型 | 70% | 30% | 有认知、有纪律 |

### 再平衡触发条件

当实际比例与目标比例偏差超过 **0.01%** 时，系统会提示需要再平衡。

## 🛠️ 技术栈

- **后端**: Go 1.24+ / Wails v2
- **前端**: Vue 3 + Element Plus
- **数据库**: SQLite (modernc.org/sqlite - 纯 Go，无 CGO)
- **加密**: AES-256-GCM

## 📁 数据存储

数据库文件存储在用户主目录：

- **Windows**: `C:\Users\<用户名>\.marginofsafety\`
- **macOS**: `/Users/<用户名>/.marginofsafety/`
- **Linux**: `/home/<用户名>/.marginofsafety/`

> 💡 **备份提示**: 复制整个 `.marginofsafety` 目录即可备份所有数据

## 🔐 安全特性

- ✅ 金额数据 AES-256 加密
- ✅ 密码本地存储（bcrypt 哈希）
- ✅ 可配置自动锁屏（0-30分钟）
- ✅ 数据库备份功能

## 📚 详细文档

查看 [入门手册](./USER_GUIDE.md) 了解详细功能说明。

## 📄 许可证

本项目采用 GNU 许可证 - 详见 [LICENSE](LICENSE) 文件

## 🙏 致谢

本项目灵感来源于本杰明·格雷厄姆的《聪明的投资者》中的"安全边际"理念。

---

**注意**: 本工具仅用于资产配置管理，不提供投资建议。投资有风险，决策需谨慎。
